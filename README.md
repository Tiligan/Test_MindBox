### Test_MindBox

Helm Chart для веб приложения на kubernetes + helm

Для развертывания приложения в Kubernetes было принято решение использовать Helm Chart, так как это обеспечивает максимальное удобство в сборке и редактировании проекта с помощью переменных значений values.yaml.

Описание поиска решения:

Инициализация приложения:
Поскольку приложению требуется 5-10 секунд для инициализации, параметр spec.minReadySeconds был установлен через values.yaml на 10 секунд, что определяет минимальное время готовности пода. Также аналогичное значение (10 секунд) установлено для readinessProbe.initialDelaySeconds.

Автобалансировка:
Для обеспечения стабильной работы при пиковой нагрузке используется максимум из 4 подов, что является предельным значением для горизонтального автоскейлинга (HPA).

Ограничение ресурсов:
Потребление ресурсов каждого пода ограничено параметрами resource.limit и resource.request в манифесте деплоймента. Резерв процессора составляет 0.1 CPU (100m), а максимальный лимит — 0.5 CPU, что позволяет справляться с первыми запросами. Объем памяти установлен на уровне 128М.

Регулирование нагрузки:
HPA контролирует циклы нагрузки, добавляя поды до 4 при пиковых нагрузках и сокращая их до 2 в период низкой активности ночью. Хотя можно было бы уменьшить число подов до одного, для обеспечения стабильности и быстрого восстановления при падении пода было решено оставить минимум 2 пода. Были рассмотрены альтернативы, такие как использование CronJob для изменения максимального количества подов по расписанию или фоновая программа для управления скриптом обновления.

Отказоустойчивость:
Liveness и Readiness пробы, обеспечивают проверку готовности пода к работе и его жизнеспособности. В случае сбоя Kubelet перезапускает под. Дополнительную устойчивость обеспечивает автоскейлинг (HPA), поддерживающий необходимое количество подов. Также, за счет использования мультизонального кластера и распределения подов по зонам с помощью spec.affinity и topologyKey, обеспечивается непрерывная работа даже при отказе одной из зон.

Минимальное потребление ресурсов:
HPA с ресурсной утилизацией позволяет автоматически масштабировать количество подов в зависимости от нагрузки, а ограничения на потребление ресурсов подами способствуют экономии.

Выбор сервиса:
В качестве сервиса используется LoadBalancer для более эффективного распределения нагрузки по нодам. Хотя можно было бы использовать Ingress Controller с ClusterIP, из-за наличия одного деплоймента это решение оказалось менее целесообразным.